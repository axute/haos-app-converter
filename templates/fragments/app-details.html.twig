<div class="p-3 border rounded" style="background:#fafafa">
    <div class="row g-2">
        <div class="col-12 col-md-6">
            <div><strong>Image:</strong> <code>{{ app.image|default('') }}{{ app.image_tag is not empty ? ':' ~ app.image_tag : '' }}</code></div>
            <div><strong>Detected PM:</strong> {{ app.detected_pm ?: 'unknown' }}</div>
            <div><strong>Backup:</strong> {{ app.backup ?: 'disabled' }}</div>
            <div><strong>Quirks:</strong> {{ app.quirks ? 'Ja' : 'Nein' }}{% if app.allow_user_env %} (User Env: Ja){% endif %}</div>
        </div>
        <div class="col-12 col-md-6">
            <div><strong>Ingress:</strong> {{ app.ingress ? 'Enabled (' ~ app.ingress_port ~ (app.ingress_stream ? ', stream' : '') ~ ', ' ~ app.ingress_entry ~ ')' : 'Disabled' }}</div>
            {% if app.ingress and app.panel_title is not empty %}
                <div><strong>Panel Title:</strong> {{ app.panel_title }}</div>
            {% endif %}
            {% if app.webui is not empty %}
                <div><strong>WebUI:</strong> <code>{{ app.webui }}</code></div>
            {% endif %}
            <div><strong>Ports:</strong> 
                {% set ports = [] %}
                {% for p in (app.ports ?: []) %}
                    {% if p.host is not empty %}
                        {% set ports = ports|merge([p.host ~ ':' ~ p.container]) %}
                    {% else %}
                        {% set ports = ports|merge(['~:'~ p.container]) %}
                    {% endif %}
                {% endfor %}
                {{ ports is not empty ? ports|join(', ') : '—' }}
            </div>
            <div><strong>Mounts:</strong> 
                {% set mounts = [] %}
                {% for m in (app.map ?: []) %}
                    {% set mountStr = m.type|default(m.folder) ~ (m.path is not empty ? ':' ~ m.path : '') ~ ' (' ~ (m.readOnly ? 'RO' : 'RW') ~ ')' %}
                    {% set mounts = mounts|merge([mountStr]) %}
                {% endfor %}
                {{ mounts is not empty ? mounts|join(', ') : '—' }}
            </div>
        </div>
        <div class="col-12">
            <div><strong>Env:</strong> 
                {% set envs = (app.env_vars ?: [])|slice(0, 5) %}
                {% for e in envs %}
                    <code>{{ e.key }}</code>
                {% endfor %}
                {% if (app.env_vars ?: [])|length > 5 %}
                    … (+{{ (app.env_vars|length) - 5 }} weitere)
                {% endif %}
                {% if app.env_vars is empty %}
                    —
                {% endif %}
            </div>
            <div><strong>tmpfs:</strong> {{ app.tmpfs ? 'Enabled' : 'Disabled' }}</div>
        </div>
    </div>
</div>
